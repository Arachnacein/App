@page "/budget"
@using UI.Models

<PageTitle> Hello in budget site</PageTitle>
<MudTabs Class="pa-4 ma-4" Elevation="5" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-6" Centered="true" >
    <MudTabPanel Text="Transactions" >
        <MudStack Row="true" Justify="Justify.FlexEnd">
            <MudStack>
                <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="AddTransaction" Class="mr-auto">
                    Add Transaction
                </MudButton>
            </MudStack>
            <MudStack>
                <MudButton Variant="Variant.Filled" Color="Color.Tertiary" OnClick="AddIncome" Class="ml-auto mr-5">
                    Add Income
                </MudButton>
            </MudStack>
        </MudStack>
        <MudStack Row="true" AlignItems="AlignItems.Center" Justify="Justify.Center" Class="ma-1 pa-1 mt-2">
            <MudIconButton Icon="@Icons.Material.Filled.KeyboardDoubleArrowLeft" OnClick="PreviousMonth" Size="Size.Large"></MudIconButton>
            @CurrentDate.GetMonthName() @CurrentDate.Year
            <MudIconButton Icon="@Icons.Material.Filled.KeyboardDoubleArrowRight" OnClick="NextMonth" Size="Size.Large"></MudIconButton>
        </MudStack>
        <MudDropContainer T="TransactionViewModel"
                          Items="transactions"
                          ItemsSelector="@((item,dropzone) => Enum.GetName(typeof(TransactionCategoryEnum), item.Category) == dropzone)"
                          ItemDropped="ItemUpdated"
                          Class="d-flex flex-wrap flex-grow-1">
            <ChildContent>
                <MudDropZone T="TransactionViewModel" Identifier="Saves" Class="rounded mud-background-gray pa-3 ma-4 flex-grow-1" AllowReorder="false" Style="width: 25%;height: 500px;">
                    <MudText Typo="Typo.h6" Class="mb-4" Style="text-align:center;color:forestgreen">Saves</MudText>
                </MudDropZone>
                <MudDropZone T="TransactionViewModel" Identifier="Fees" Class="rounded mud-background-gray pa-3 ma-3 flex-grow-1" AllowReorder="false" Style="width: 25%;height: 500px;">
                    <MudText Typo="Typo.h6" Class="mb-4" Style="text-align:center;color:darkred">Fees</MudText>
                </MudDropZone>
                <MudDropZone T="TransactionViewModel" Identifier="Entertainment" Class="rounded mud-background-gray pa-3 ma-4 flex-grow-1" AllowReorder="false" Style="width: 25%;height: 500px;">
                    <MudText Typo="Typo.h6" Class="mb-4" Style="text-align:center;color:dodgerblue">Entertainment</MudText>
                </MudDropZone>
            </ChildContent>
            <ItemRenderer>
                <MudTooltip Placement="Placement.Bottom" ShowOnHover="true" Delay="150" Class="ma-4 pa-4" RootStyle="width: 100%;">
                    <ChildContent>
                        <MudPaper Elevation="25" Class="pa-2 my-2">
                            <MudGrid>
                                <MudItem xs="8">
                                    <MudText Typo="Typo.body1">@context.Name</MudText>
                                </MudItem>
                                <MudItem xs="4" Class="text-align-right">
                                    <MudText Typo="Typo.body1">@context.Price</MudText>
                                </MudItem>
                            </MudGrid>
                        </MudPaper>
                    </ChildContent>
                    <TooltipContent>
                        <MudText Typo="Typo.body2">@context.Date.Format()</MudText>
                        <MudText Typo="Typo.body2">@context.Description</MudText>
                    </TooltipContent>
                </MudTooltip>
            </ItemRenderer>
        </MudDropContainer>
    </MudTabPanel>

    <MudTabPanel Text="Statistics"> 
        <MudText>Content coming soon!</MudText>
    </MudTabPanel>

    <MudTabPanel Text="Tab3" Disabled="true">
        <MudText>Hidden message</MudText>
    </MudTabPanel>

</MudTabs>
        
@page "/options/account"
@using UI.Models;
@using UI.Models.ViewModels

<PageTitle>@Localizer["Title"]</PageTitle>
<UI.Components.OptionNavigationComponent />

@if (UserSessionService == null || UserSessionService.UserId == Guid.Empty)
{
    <MudPaper Class="ma-7 pa-7" Elevation="30">
        <MudText Typo="Typo.h6" Align="Align.Center">@Localizer["MustLogIn"]</MudText>
    </MudPaper>
}
else
{
    <MudPaper Class="ma-1 pa-2" Elevation="5" style="text-align:center;">
        <MudText Typo="Typo.h4" Align="Align.Center" Class="pa-2 ma-2">@Localizer["Title"]</MudText>
        <MudDivider />

        <MudContainer Class="pa-4">
            <MudPaper Class="ma-4 pa-4" Elevation="3">
                <MudStack Row="false" Spacing="2" Class="ma-2 pa-3 mb-5">
                    <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="4">
                        <MudText Typo="Typo.body1" Class="font-weight-bold">@Localizer["LabelUserName"]</MudText>
                        <MudText Typo="Typo.body1">@UserDetails.Username</MudText>
                        <MudButton Class="ml-2" Size="Size.Medium" OnClick="() => EditData(nameof(UserDetails.Username))">
                            <MudText Color="Color.Secondary">@Localizer["Edit"]</MudText>
                        </MudButton>
                    </MudStack>
                    <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="4">
                        <MudText Typo="Typo.body1" Class="font-weight-bold">@Localizer["LabelFirstName"]</MudText>
                        <MudText Typo="Typo.body1">@UserDetails.FirstName</MudText>
                        <MudButton Class="ml-2" Size="Size.Medium" OnClick="() => EditData(nameof(UserDetails.FirstName))">
                            <MudText Color="Color.Secondary">@Localizer["Edit"]</MudText>
                        </MudButton>
                    </MudStack>
                    <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="4">
                        <MudText Typo="Typo.body1" Class="font-weight-bold">@Localizer["LabelLastName"]</MudText>
                        <MudText Typo="Typo.body1">@UserDetails.LastName</MudText>
                        <MudButton Class="ml-2" Size="Size.Medium" OnClick="() => EditData(nameof(UserDetails.LastName))">
                            <MudText Color="Color.Secondary">@Localizer["Edit"]</MudText>
                        </MudButton>
                    </MudStack>
                    <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="4">
                        <MudText Typo="Typo.body1" Class="font-weight-bold">@Localizer["LabelEmail"]</MudText>
                        <MudText Typo="Typo.body1">@UserDetails.Email</MudText>
                        <MudButton Class="ml-2" Size="Size.Medium" OnClick="() => EditData(nameof(UserDetails.Email))">
                            <MudText Color="Color.Secondary">@Localizer["Edit"]</MudText>
                        </MudButton>
                    </MudStack>      
                    @if(!UserSessionService.EmailVerified)
                    {
                        <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2">
                            <MudText Typo="Typo.body2" Color="Color.Error">@Localizer["LabelVerifyEmail"]</MudText>
                            <MudButton Class="ml-2" Size="Size.Small" OnClick="VerifyEmail">
                                <MudText Color="Color.Error" Style="font-size:smaller;">@Localizer["Verify"]</MudText>
                            </MudButton>
                        </MudStack>
                    }
                </MudStack>

                <MudStack Row="false" Spacing="2" Class="ma-2 pa-3 mb-5">
                    <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="4">
                        <MudText Typo="Typo.body1" Class="font-weight-bold">Roles:</MudText>
                        <MudText Typo="Typo.body1">@string.Join(", ", UserDetails.Roles)</MudText>
                    </MudStack>
                    <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="4">
                        <MudText Typo="Typo.body1" Class="font-weight-bold">@Localizer["AccountCreated"]</MudText>
                        <MudText Typo="Typo.body1">@UserDetails.AccountCreatedDate.ToString("dd-MM-yyyy HH:mm")</MudText>
                    </MudStack>
                    <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="4">
                        <MudText Typo="Typo.body1" Class="font-weight-bold">@Localizer["SessionExpirations"]</MudText>
                        <MudText Typo="Typo.body1">@UserDetails.SessionExpiryDate.ToString("dd-MM-yyyy HH:mm")</MudText>
                    </MudStack>
                </MudStack>
            </MudPaper>
        </MudContainer>
    </MudPaper>

}